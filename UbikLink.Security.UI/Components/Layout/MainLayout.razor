@using UbikLink.Common.RazorUI.Config
@using UbikLink.Common.RazorUI.Tweaks
@using BlazorPageScript
@using UbikLink.Common.RazorUI.Components
@inherits LayoutComponentBase

<PageScript Src="./sessionmanager.js" />

<FluentLayout>
    <FluentHeader>
        <FluentStack>
            Security.UI
            <FluentSpacer></FluentSpacer>
            <AuthorizeView>
                <Authorized>
                    <div class="tw-flex tw-flex-row tw-gap-2">
                        <div>
                            <DarkModeSwitch @rendermode="InteractiveAuto" />
                        </div>
                        <div class="tw-hidden sm:tw-block">
                            <a href="settings">
                                <FluentButton Appearance="Appearance.Accent"
                                              IconStart="@(new Icons.Regular.Size20.Settings())"
                                              Title="Settings">
                                </FluentButton>
                            </a>
                        </div>
                        <div>
                            <UbikNotificationCenter @rendermode="InteractiveAuto" />
                        </div>
                        <div>
                            <UbikSessionManager @rendermode="InteractiveAuto"></UbikSessionManager>
                        </div>
                    </div>
                </Authorized>
                <NotAuthorized>
                    <a href="account/login">
                        <FluentButton Appearance="Appearance.Accent"
                                      IconStart="@(new Icons.Regular.Size20.Molecule())"
                                      Title="Login">
                        </FluentButton>
                    </a>
                </NotAuthorized>
            </AuthorizeView>
        </FluentStack>
    </FluentHeader>
    <FluentStack Class="main" Orientation="Orientation.Horizontal" Width="100%">
        <NavMenu />
        <FluentBodyContent Class="body-content">
            <div class="content">
                @Body
                <FluentToastProvider RemoveToastsOnNavigation="false" MaxToastCount="10" @rendermode="InteractiveAuto" />
                <FluentDialogProvider @rendermode="InteractiveAuto"/>
                <FluentMenuProvider @rendermode="InteractiveAuto" />
            </div>
        </FluentBodyContent>
    </FluentStack>
</FluentLayout>
<FluentDialogProvider />

<div id="blazor-error-ui" data-nosnippet>
    An unhandled error has occurred.
    <a href="." class="reload">Reload</a>
    <span class="dismiss">🗙</span>
</div>

